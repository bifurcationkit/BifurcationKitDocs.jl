<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Event handling and Callback · Bifurcation Analysis in Julia</title><meta name="title" content="Event handling and Callback · Bifurcation Analysis in Julia"/><meta property="og:title" content="Event handling and Callback · Bifurcation Analysis in Julia"/><meta property="twitter:title" content="Event handling and Callback · Bifurcation Analysis in Julia"/><meta name="description" content="Documentation for Bifurcation Analysis in Julia."/><meta property="og:description" content="Documentation for Bifurcation Analysis in Julia."/><meta property="twitter:description" content="Documentation for Bifurcation Analysis in Julia."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="Bifurcation Analysis in Julia logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Bifurcation Analysis in Julia</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../capabilities/">Overview of capabilities</a></li><li><a class="tocitem" href="../gettingstarted/">Getting Started with BifurcationKit</a></li><li><a class="tocitem" href="../tutorials/tutorials/">Tutorials</a></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Basics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../guidelines/">Guidelines</a></li><li><a class="tocitem" href="../educational/">Educational introduction</a></li><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../plotting/">Plot functions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Problems</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../BifProblem/">Bifurcation Problem</a></li><li><a class="tocitem" href="../diffeq/">DiffEq wrapper</a></li><li><input class="collapse-toggle" id="menuitem-6-3" type="checkbox"/><label class="tocitem" for="menuitem-6-3"><span class="docs-label">Periodic Orbits</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../periodicOrbit/">Introduction</a></li><li><a class="tocitem" href="../periodicOrbitTrapeze/">Trapezoid</a></li><li><a class="tocitem" href="../periodicOrbitCollocation/">Collocation</a></li><li><a class="tocitem" href="../periodicOrbitShooting/">Shooting</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-4" type="checkbox"/><label class="tocitem" for="menuitem-6-4"><span class="docs-label">Symmetries / Waves</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../intro_wave/">Introduction</a></li><li><a class="tocitem" href="../waveEigen/">Eigen Solvers</a></li><li><a class="tocitem" href="../ModulatedTW/">Modulated Travelling waves</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Continuation methods</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../IntroContinuation/">Introduction</a></li><li><a class="tocitem" href="../Predictors/">Predictors / correctors</a></li><li><a class="tocitem" href="../PALC/">PALC</a></li><li><a class="tocitem" href="../MooreSpence/">Moore-Penrose continuation</a></li><li><a class="tocitem" href="../ANM/">ANM</a></li><li><a class="tocitem" href="../DeflatedContinuation/">Deflated continuation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox" checked/><label class="tocitem" for="menuitem-8"><span class="docs-label">Functionalities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-8-1" type="checkbox"/><label class="tocitem" for="menuitem-8-1"><span class="docs-label">Nonlinear equations (Newton)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../newton/">Krylov-Newton algorithm</a></li><li><a class="tocitem" href="../deflatedproblem/">Deflated problems</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-2" type="checkbox"/><label class="tocitem" for="menuitem-8-2"><span class="docs-label">Bifurcations (equilibria)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../detectionBifurcation/">Bifurcation detection (1 param)</a></li><li><a class="tocitem" href="../codim2Continuation/">Fold / Hopf Continuation (2 params)</a></li><li><a class="tocitem" href="../codim3Continuation/">Bogdanov-Takens refinement (3 params)</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-3" type="checkbox"/><label class="tocitem" for="menuitem-8-3"><span class="docs-label">Bifurcations (periodic orbits)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../detectionBifurcationPO/">Bifurcation detection (1 param)</a></li><li><a class="tocitem" href="../FoldContinuationPO/">Fold continuation (2 params)</a></li><li><a class="tocitem" href="../PDContinuationPO/">Period-Doubling continuation (2 params)</a></li><li><a class="tocitem" href="../NSContinuationPO/">Neimark-Sacker continuation (2 params)</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-4" type="checkbox"/><label class="tocitem" for="menuitem-8-4"><span class="docs-label">Normal form (equilibria)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../simplebp/">Simple branch point</a></li><li><a class="tocitem" href="../nonsimplebp/">Non-simple branch point</a></li><li><a class="tocitem" href="../simplehopf/">Simple Hopf</a></li><li><a class="tocitem" href="../cusp/">Cusp</a></li><li><a class="tocitem" href="../bt/">Bogdanov-Takens</a></li><li><a class="tocitem" href="../bautin/">Bautin</a></li><li><a class="tocitem" href="../zh/">Zero-Hopf</a></li><li><a class="tocitem" href="../hh/">Hopf-Hopf</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-5" type="checkbox"/><label class="tocitem" for="menuitem-8-5"><span class="docs-label">Normal form (periodic orbits)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../bppo/">Simple branch point</a></li><li><a class="tocitem" href="../pd/">Period-doubling</a></li><li><a class="tocitem" href="../ns/">Neimark-Sacker</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-6" type="checkbox"/><label class="tocitem" for="menuitem-8-6"><span class="docs-label">Branch switching</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../intro-abs/">Introduction</a></li><li><a class="tocitem" href="../abs-from-eq/">From equilibria to equilibria</a></li><li><a class="tocitem" href="../abs-from-hopf/">From Hopf/PD/Branch to periodic orbits</a></li><li><a class="tocitem" href="../abs-from-codim2-eq/">From codim 2 to equilibria</a></li><li><a class="tocitem" href="../abs-from-codim2-po/">From codim 2 to periodic orbits</a></li></ul></li><li><a class="tocitem" href="../BifurcationDiagram/">Bifurcation diagram</a></li><li class="is-active"><a class="tocitem" href>Event handling and Callback</a><ul class="internal"><li><a class="tocitem" href="#Precise-detection-of-event-points-using-Bisection"><span>Precise detection of event points using Bisection</span></a></li><li><a class="tocitem" href="#Different-event-types"><span>Different event types</span></a></li><li><a class="tocitem" href="#Built-in-events"><span>Built-in events</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li></ul></li><li><a class="tocitem" href="../iterator/">Iterator Interface</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">Options</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../linearsolver/">Linear solvers</a></li><li><a class="tocitem" href="../borderedlinearsolver/">Bordered linear solvers</a></li><li><a class="tocitem" href="../eigensolver/">Eigen solvers</a></li><li><a class="tocitem" href="../Borderedarrays/">Bordered arrays</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10" type="checkbox"/><label class="tocitem" for="menuitem-10"><span class="docs-label">Contributing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-10-1" type="checkbox"/><label class="tocitem" for="menuitem-10-1"><span class="docs-label">Interfaces</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../interfaceLS/">Vector</a></li><li><a class="tocitem" href="../interfaceLS/">Linear / eigen Solvers</a></li><li><a class="tocitem" href="../interfacePred/">Predictor / corrector</a></li><li><a class="tocitem" href="../interfaceFlow/">Flow</a></li></ul></li></ul></li><li><a class="tocitem" href="../faq/">Frequently asked questions</a></li><li><a class="tocitem" href="../migration/">Migration from old versions</a></li><li><a class="tocitem" href="../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Functionalities</a></li><li class="is-active"><a href>Event handling and Callback</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Event handling and Callback</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/bifurcationkit/BifurcationKitDocs.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/bifurcationkit/BifurcationKitDocs.jl/blob/main/docs/src/EventCallback.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Event-Handling"><a class="docs-heading-anchor" href="#Event-Handling">Event Handling</a><a id="Event-Handling-1"></a><a class="docs-heading-anchor-permalink" href="#Event-Handling" title="Permalink"></a></h1><p><code>BifurcationKit.jl</code> allows the detection of events along the branch of solutions. Its main use consists in detecting bifurcation points but they can be used and combined together by the user too.</p><p>The events are detected during a call to <code>br = continuation(prob, alg, contParams::ContinuationPar;kwargs...)</code> by turning on the following flag(s):</p><ul><li><code>contParams.detect_event = 1</code></li></ul><p>The event points are located by looking at the function defining the event (see below). The located event points are then returned in <code>br.specialpoint</code>.</p><h2 id="Precise-detection-of-event-points-using-Bisection"><a class="docs-heading-anchor" href="#Precise-detection-of-event-points-using-Bisection">Precise detection of event points using Bisection</a><a id="Precise-detection-of-event-points-using-Bisection-1"></a><a class="docs-heading-anchor-permalink" href="#Precise-detection-of-event-points-using-Bisection" title="Permalink"></a></h2><p>Note that the event points detected when <code>detect_event = 1</code> are only approximate event points. Indeed, we only signal that, in between two continuation steps which can be large, a (several) event point has been detected. Hence, we only have a rough idea of where the event is located, unless your <code>ContinuationPar().dsmax</code> is very small... This can be improved as follows.</p><p>If you choose <code>detect_event = 2</code>, a bisection algorithm is used to locate the event points more precisely. It means that we recursively track down the event. Some options in <code>ContinuationPar</code> control this behavior:</p><ul><li><code>n_inversion</code>: number of sign inversions in the bisection algorithm</li><li><code>max_bisection_steps</code> maximum number of bisection steps</li><li><code>tol_param_bisection_event</code> tolerance on parameter to locate event</li></ul><h2 id="Different-event-types"><a class="docs-heading-anchor" href="#Different-event-types">Different event types</a><a id="Different-event-types-1"></a><a class="docs-heading-anchor-permalink" href="#Different-event-types" title="Permalink"></a></h2><p>The set of possible events <code>DiscreteEvent, ContinuousEvent, SetOfEvents, PairOfEvents</code> is detailed in the <a href="https://bifurcationkit.github.io/BifurcationKitDocs.jl/dev/library/#Events-1">Library</a>.</p><h2 id="Built-in-events"><a class="docs-heading-anchor" href="#Built-in-events">Built-in events</a><a id="Built-in-events-1"></a><a class="docs-heading-anchor-permalink" href="#Built-in-events" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BifurcationKit.SaveAtEvent" href="#BifurcationKit.SaveAtEvent"><code>BifurcationKit.SaveAtEvent</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">`SaveAtEvent(positions::Tuple)`</code></pre><p>This event implements the detection of when the parameter values, used during continuation, equals one of the values in <code>positions</code>. This state is then saved in the branch.</p><p>For example, you can use it like <code>continuation(args...; event = SaveAtEvent((1., 2., -3.)))</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bifurcationkit/BifurcationKit.jl/blob/b110ae097e263eff13b0c86e0e1ff4f258c2455c/src/events/BifurcationDetection.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BifurcationKit.FoldDetectEvent" href="#BifurcationKit.FoldDetectEvent"><code>BifurcationKit.FoldDetectEvent</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`FoldDetectEvent`</code></pre><p>This event implements the detection of Fold points based on the p-component of the tangent vector to the continuation curve. It is designed to work with <code>PALC(tangent=Bordered())</code> as continuation algorithm. To use it, pass <code>event = FoldDetectEvent</code> to <code>continuation</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bifurcationkit/BifurcationKit.jl/blob/b110ae097e263eff13b0c86e0e1ff4f258c2455c/src/events/BifurcationDetection.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BifurcationKit.BifDetectEvent" href="#BifurcationKit.BifDetectEvent"><code>BifurcationKit.BifDetectEvent</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">`BifDetectEvent`</code></pre><p>This event implements the detection of bifurcations points along a continuation curve. The detection is based on monitoring the number of unstable eigenvalues. More details are given at <a href="../detectionBifurcation/#Detection-of-bifurcation-points-of-Equilibria">Detection of bifurcation points of Equilibria</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bifurcationkit/BifurcationKit.jl/blob/b110ae097e263eff13b0c86e0e1ff4f258c2455c/src/events/BifurcationDetection.jl#L39-L43">source</a></section></article><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><p>We show how to use the different events. We first set up a problem as usual.</p><pre><code class="language-julia hljs">using Revise, BifurcationKit
using Plots
const BK = BifurcationKit
####################################################################################################
# test vector field for event detection
function Feve(X, p)
	p1, p2, k = p
	x, y = X
	out = similar(X)
	out[1] = p1 + x - y - x^k/k
	out[2] = p1 + y + x - 2y^k/k
	out
end

# parameters for the vector field
par = (p1 = -3., p2 = -3., k = 3)

# bifurcation problem
prob = BifurcationProblem(Feve, -2ones(2), par, (@lens _.p1);
	record_from_solution = (x, p) -&gt; x[1])

# parameters for the continuation
opts = ContinuationPar(max_steps = 150, p_min = -3., p_max = 4.0,
    # we disable bifurcation detection to focus
    # on the user passed events
    detect_bifurcation = 0, detect_fold = false,
    # parameters specific to event detection
    detect_event = 2)
# arguments for continuation
args = (prob, PALC(), opts)
kwargs = (plot = false, verbosity = 0,)</code></pre><h3 id="Example-of-continuous-event"><a class="docs-heading-anchor" href="#Example-of-continuous-event">Example of continuous event</a><a id="Example-of-continuous-event-1"></a><a class="docs-heading-anchor-permalink" href="#Example-of-continuous-event" title="Permalink"></a></h3><p>In this first example, we build an event to detect when the parameter value is <code>-2</code> or when the first component of the solution is <code>1</code>.</p><pre><code class="language-julia hljs">br = continuation(args...; kwargs...,
	event = BK.ContinuousEvent(2,
		(iter, state) -&gt; (getp(state)+2, getx(state)[1]-1)),)
nothing #hide</code></pre><p>gives</p><pre><code class="language-julia hljs">br</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"> ┌─ Curve type: <span class="sgr36"><span class="sgr1">EquilibriumCont</span></span>
 ├─ Number of points: 115
 ├─ Type of vectors: <span class="sgr36"><span class="sgr1">Vector{Float64}</span></span>
 ├─ Parameter <span class="sgr36"><span class="sgr1">p1</span></span> starts at -3.0, ends at 4.0
 ├─ Algo: <span class="sgr36"><span class="sgr1">PALC</span></span>
 └─ Special points:

- #  1, <span class="sgr34"><span class="sgr1"> userC-1</span></span> at p1 ≈ -1.98380428 ∈ (-2.00059057, -1.98380428), |δp|=2e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  12
- #  2, <span class="sgr34"><span class="sgr1"> userC-1</span></span> at p1 ≈ -2.00301167 ∈ (-2.00301167, -1.99953208), |δp|=3e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  28
- #  3, <span class="sgr34"><span class="sgr1"> userC-2</span></span> at p1 ≈ -2.30722875 ∈ (-2.30888689, -2.30722875), |δp|=2e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  33
- #  4, <span class="sgr34"><span class="sgr1"> userC-1</span></span> at p1 ≈ -1.99895595 ∈ (-2.01435831, -1.99895595), |δp|=2e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  36
- #  5, <span class="sgr34"><span class="sgr1"> userC-2</span></span> at p1 ≈ -0.83478733 ∈ (-0.83598611, -0.83478733), |δp|=1e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  48
- #  6, <span class="sgr34"><span class="sgr1"> userC-2</span></span> at p1 ≈ +1.15208549 ∈ (+1.14075593, +1.15208549), |δp|=1e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  92
- #  7, <span class="sgr1">endpoint</span> at p1 ≈ +4.00000000,                                                                     step = 114
</code></pre><p>This shows for example that the first component of the event was detected <code>userC-1</code> first. This yields</p><pre><code class="language-julia hljs">plot(br)</code></pre><img src="a6694611.svg" alt="Example block output"/><p>You can also name the events as follows</p><pre><code class="language-julia hljs">br = continuation(args...; kwargs...,
 	event = BK.ContinuousEvent(2,
 		(iter, state) -&gt; (getp(state)+2, getx(state)[1]-1),
 		(&quot;event1&quot;, &quot;event2&quot;)))
nothing #hide</code></pre><p>And get:</p><pre><code class="language-julia hljs">br</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"> ┌─ Curve type: <span class="sgr36"><span class="sgr1">EquilibriumCont</span></span>
 ├─ Number of points: 115
 ├─ Type of vectors: <span class="sgr36"><span class="sgr1">Vector{Float64}</span></span>
 ├─ Parameter <span class="sgr36"><span class="sgr1">p1</span></span> starts at -3.0, ends at 4.0
 ├─ Algo: <span class="sgr36"><span class="sgr1">PALC</span></span>
 └─ Special points:

- #  1, <span class="sgr34"><span class="sgr1">  event1</span></span> at p1 ≈ -1.98380428 ∈ (-2.00059057, -1.98380428), |δp|=2e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  12
- #  2, <span class="sgr34"><span class="sgr1">  event1</span></span> at p1 ≈ -2.00301167 ∈ (-2.00301167, -1.99953208), |δp|=3e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  28
- #  3, <span class="sgr34"><span class="sgr1">  event2</span></span> at p1 ≈ -2.30722875 ∈ (-2.30888689, -2.30722875), |δp|=2e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  33
- #  4, <span class="sgr34"><span class="sgr1">  event1</span></span> at p1 ≈ -1.99895595 ∈ (-2.01435831, -1.99895595), |δp|=2e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  36
- #  5, <span class="sgr34"><span class="sgr1">  event2</span></span> at p1 ≈ -0.83478733 ∈ (-0.83598611, -0.83478733), |δp|=1e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  48
- #  6, <span class="sgr34"><span class="sgr1">  event2</span></span> at p1 ≈ +1.15208549 ∈ (+1.14075593, +1.15208549), |δp|=1e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  92
- #  7, <span class="sgr1">endpoint</span> at p1 ≈ +4.00000000,                                                                     step = 114
</code></pre><pre><code class="language-julia hljs">plot(br)</code></pre><img src="876e5e78.svg" alt="Example block output"/><h3 id="Example-of-discrete-event"><a class="docs-heading-anchor" href="#Example-of-discrete-event">Example of discrete event</a><a id="Example-of-discrete-event-1"></a><a class="docs-heading-anchor-permalink" href="#Example-of-discrete-event" title="Permalink"></a></h3><p>You can also use discrete events to detect a change. For example, the following detect when the parameter value equals <code>-2</code>:</p><pre><code class="language-julia hljs">br = continuation(args...; kwargs...,
	event = BK.DiscreteEvent(1,
		(iter, state) -&gt; getp(state)&gt;-2))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"> ┌─ Curve type: <span class="sgr36"><span class="sgr1">EquilibriumCont</span></span>
 ├─ Number of points: 114
 ├─ Type of vectors: <span class="sgr36"><span class="sgr1">Vector{Float64}</span></span>
 ├─ Parameter <span class="sgr36"><span class="sgr1">p1</span></span> starts at -3.0, ends at 4.0
 ├─ Algo: <span class="sgr36"><span class="sgr1">PALC</span></span>
 └─ Special points:

- #  1, <span class="sgr34"><span class="sgr1">   userD</span></span> at p1 ≈ -1.98380428 ∈ (-2.00059057, -1.98380428), |δp|=2e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  12
- #  2, <span class="sgr34"><span class="sgr1">   userD</span></span> at p1 ≈ -2.00301167 ∈ (-2.00301167, -1.99953208), |δp|=3e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  28
- #  3, <span class="sgr34"><span class="sgr1">   userD</span></span> at p1 ≈ -1.99670519 ∈ (-2.00056478, -1.99670519), |δp|=4e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  35
- #  4, <span class="sgr1">endpoint</span> at p1 ≈ +4.00000000,                                                                     step = 113
</code></pre><h3 id="Example-of-PairOfEvents-event"><a class="docs-heading-anchor" href="#Example-of-PairOfEvents-event">Example of PairOfEvents event</a><a id="Example-of-PairOfEvents-event-1"></a><a class="docs-heading-anchor-permalink" href="#Example-of-PairOfEvents-event" title="Permalink"></a></h3><p>Let us be a bit more creative and combine a continuous event with a discrete one:</p><pre><code class="language-julia hljs">br = continuation(args...; kwargs...,
	event = BK.PairOfEvents(
		BK.ContinuousEvent(1, (iter, state) -&gt; getp(state)),
		BK.DiscreteEvent(1, (iter, state) -&gt; getp(state)&gt;-2)))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"> ┌─ Curve type: <span class="sgr36"><span class="sgr1">EquilibriumCont</span></span>
 ├─ Number of points: 114
 ├─ Type of vectors: <span class="sgr36"><span class="sgr1">Vector{Float64}</span></span>
 ├─ Parameter <span class="sgr36"><span class="sgr1">p1</span></span> starts at -3.0, ends at 4.0
 ├─ Algo: <span class="sgr36"><span class="sgr1">PALC</span></span>
 └─ Special points:

- #  1, <span class="sgr34"><span class="sgr1">   userD</span></span> at p1 ≈ -1.98380428 ∈ (-2.00059057, -1.98380428), |δp|=2e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  12
- #  2, <span class="sgr34"><span class="sgr1">   userD</span></span> at p1 ≈ -2.00301167 ∈ (-2.00301167, -1.99953208), |δp|=3e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  28
- #  3, <span class="sgr34"><span class="sgr1">   userD</span></span> at p1 ≈ -1.99670519 ∈ (-2.00056478, -1.99670519), |δp|=4e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  35
- #  4, <span class="sgr34"><span class="sgr1">   userC</span></span> at p1 ≈ +0.01029312 ∈ (-0.00414058, +0.01029312), |δp|=1e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  55
- #  5, <span class="sgr1">endpoint</span> at p1 ≈ +4.00000000,                                                                     step = 113
</code></pre><p>Here <code>userD-1</code> means that the first component of the discrete event was detected. Of course, you can name the event like done above.</p><h3 id="Example-of-set-of-events"><a class="docs-heading-anchor" href="#Example-of-set-of-events">Example of set of events</a><a id="Example-of-set-of-events-1"></a><a class="docs-heading-anchor-permalink" href="#Example-of-set-of-events" title="Permalink"></a></h3><p>We can combine more events and chain them like we want using <code>SetOfEvents</code>. In this example, we show how to do bifurcation detection and event location altogether:</p><pre><code class="language-julia hljs">ev1 = BK.ContinuousEvent(1, (iter, state) -&gt; getp(state)-1)
ev2 = BK.ContinuousEvent(2, (iter, state) -&gt; (getp(state)-2, getp(state)-2.5))
# event to detect bifurcation
ev3 = BK.BifDetectEvent
# we combine the events together
eve = BK.SetOfEvents(ev1, ev2, ev3)

br = continuation(args...; kwargs...,
		event = eve)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"> ┌─ Curve type: <span class="sgr36"><span class="sgr1">EquilibriumCont</span></span>
 ├─ Number of points: 119
 ├─ Type of vectors: <span class="sgr36"><span class="sgr1">Vector{Float64}</span></span>
 ├─ Parameter <span class="sgr36"><span class="sgr1">p1</span></span> starts at -3.0, ends at 4.0
 ├─ Algo: <span class="sgr36"><span class="sgr1">PALC</span></span>
 └─ Special points:

- #  1, <span class="sgr34"><span class="sgr1">      bp</span></span> at p1 ≈ -1.13331997 ∈ (-1.13331997, -1.13288137), |δp|=4e-04, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 1,  0), step =  20
- #  2, <span class="sgr34"><span class="sgr1">      bp</span></span> at p1 ≈ -2.32501040 ∈ (-2.32501894, -2.32501040), |δp|=9e-06, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = (-1,  0), step =  33
- #  3, <span class="sgr34"><span class="sgr1">    hopf</span></span> at p1 ≈ -0.95023978 ∈ (-0.95537606, -0.95023978), |δp|=5e-03, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 2,  2), step =  47
- #  4, <span class="sgr34"><span class="sgr1">    hopf</span></span> at p1 ≈ +0.95861227 ∈ (+0.94836964, +0.95861227), |δp|=1e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = (-2, -2), step =  67
- #  5, <span class="sgr34"><span class="sgr1">  userC1</span></span> at p1 ≈ +1.00022767 ∈ (+0.99917369, +1.00022767), |δp|=1e-03, [<span class="sgr31"><span class="sgr1">    guess</span></span>], δ = ( 0,  0), step =  69
- #  6, <span class="sgr34"><span class="sgr1">userC2-1</span></span> at p1 ≈ +2.00505846 ∈ (+1.98961239, +2.00505846), |δp|=2e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  78
- #  7, <span class="sgr34"><span class="sgr1">      bp</span></span> at p1 ≈ +2.32505861 ∈ (+2.32488513, +2.32505861), |δp|=2e-04, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 1,  0), step =  82
- #  8, <span class="sgr34"><span class="sgr1">userC2-1</span></span> at p1 ≈ +1.99013402 ∈ (+1.99013402, +2.00407138), |δp|=1e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step =  86
- #  9, <span class="sgr34"><span class="sgr1">      bp</span></span> at p1 ≈ +1.13286568 ∈ (+1.13286568, +1.13289065), |δp|=2e-05, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = (-1,  0), step =  95
- # 10, <span class="sgr34"><span class="sgr1">userC2-1</span></span> at p1 ≈ +2.01959644 ∈ (+1.98600267, +2.01959644), |δp|=3e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step = 103
- # 11, <span class="sgr34"><span class="sgr1">userC2-2</span></span> at p1 ≈ +2.52953918 ∈ (+2.49528893, +2.52953918), |δp|=3e-02, [<span class="sgr32"><span class="sgr1">converged</span></span>], δ = ( 0,  0), step = 107
- # 12, <span class="sgr1">endpoint</span> at p1 ≈ +4.00000000,                                                                     step = 118
</code></pre><p>Which gives</p><pre><code class="language-julia hljs">plot(br)</code></pre><img src="5dd3b164.svg" alt="Example block output"/><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../BifurcationDiagram/">« Bifurcation diagram</a><a class="docs-footer-nextpage" href="../iterator/">Iterator Interface »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Monday 3 June 2024 17:38">Monday 3 June 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
